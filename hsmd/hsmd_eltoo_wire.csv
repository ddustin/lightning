#include <bitcoin/signature.h>
#include <bitcoin/tx.h>
#include <common/channel_type.h>
# Provide channel parameters.
msgtype,hsmd_ready_eltoo_channel,81
msgdata,hsmd_ready_eltoo_channel,is_outbound,bool,
msgdata,hsmd_ready_eltoo_channel,channel_value,amount_sat,
msgdata,hsmd_ready_eltoo_channel,push_value,amount_msat,
msgdata,hsmd_ready_eltoo_channel,funding_txid,bitcoin_txid,
msgdata,hsmd_ready_eltoo_channel,funding_txout,u16,
msgdata,hsmd_ready_eltoo_channel,shared_delay,u16,
msgdata,hsmd_ready_eltoo_channel,local_shutdown_script_len,u16,
msgdata,hsmd_ready_eltoo_channel,local_shutdown_script,u8,local_shutdown_script_len
msgdata,hsmd_ready_eltoo_channel,local_shutdown_wallet_index,?u32,
msgdata,hsmd_ready_eltoo_channel,remote_funding_pubkey,pubkey,
msgdata,hsmd_ready_eltoo_channel,remote_settle_pubkey,pubkey,
msgdata,hsmd_ready_eltoo_channel,remote_shutdown_script_len,u16,
msgdata,hsmd_ready_eltoo_channel,remote_shutdown_script,u8,remote_shutdown_script_len
msgdata,hsmd_ready_eltoo_channel,channel_type,channel_type,

# No value returned.
msgtype,hsmd_ready_eltoo_channel_reply,181

# Reply for all the above requests.
msgtype,hsmd_sign_update_tx_reply,162
msgdata,hsmd_sign_update_tx_reply,sig,bip340sig,

# Openingd/channeld asks HSM to sign the shared update tx.
#include <common/htlc_wire.h>
msgtype,hsmd_sign_update_tx,69
msgdata,hsmd_sign_update_tx,update_tx,bitcoin_tx,
msgdata,hsmd_sign_update_tx,remote_funding_key,pubkey,
msgdata,hsmd_sign_update_tx,update_num,u64,
msgdata,hsmd_sign_update_tx,num_htlcs,u16,
msgdata,hsmd_sign_update_tx,htlcs,simple_htlc,num_htlcs

msgtype,hsmd_validate_update_tx,95
msgdata,hsmd_validate_update_tx,tx,bitcoin_tx,
msgdata,hsmd_validate_update_tx,num_htlcs,u16,
msgdata,hsmd_validate_update_tx,htlcs,simple_htlc,num_htlcs
msgdata,hsmd_validate_update_tx,update_num,u64,
msgdata,hsmd_validate_update_tx,sig,bip340sig,

msgtype,hsmd_validate_update_tx_reply,195
